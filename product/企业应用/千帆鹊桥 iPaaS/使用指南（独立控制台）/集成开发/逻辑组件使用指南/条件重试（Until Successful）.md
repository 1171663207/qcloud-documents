### 条件重试（Until Successful）

#### 1. 简介

*条件重试*组件的作用是对其子流执行重试操作。*条件重试*支持3种重试类型：无条件重试、按成功条件重试、按失败条件重试。

- 无条件重试，只在子流报错的情况下重试

- 按成功条件重试，当表达式结果为false或子流报错时重试

- 按失败条件重试，当表达式结果为true或子流报错时重试

用户可根据需要配置重试次数（1~100次）和两次重试之间的时间间隔（1~300秒）。

#### 2. 操作指引

##### 连接说明

无

##### 参数配置

| 参数         | 数据类型                               | 描述                                                         | 是否必填 | 默认值 |
| :----------- | :------------------------------------- | :----------------------------------------------------------- | :------- | ------ |
| 重试条件类型 | 枚举：无；按成功条件重试；按失败条件重 | 重试条件的类型                                               | 是       | 无     |
| 重试条件     | bool                                   | 当重试条件类型为按成功条件重试或按失败条件重试时，定义判断的方法 | 否       | -      |
| 重试次数     | int                                    | 重试次数，取值范围1~100                                      | 是       | 3      |
| 重试时间间隔 | int                                    | 重试间隔，取值范围1~300，单位秒                              | 是       | 60     |

![](https://qcloudimg.tencent-cloud.cn/raw/56e6e49a1457a6d01b539a87bdd5d11c.jpg)

##### 数据预览

无

##### 输入到子流中的message

| message属性 | 值                                      |
| ----------- | --------------------------------------- |
| payload     | 继承*条件重试*上一个组件的payload       |
| error       | 空                                      |
| attribute   | 继承*条件重试*上一个组件的attribute信息 |
| variable    | 继承*条件重试*上一个组件的variable信息  |

##### 输出

| message属性 | 值                                                           |
| ----------- | ------------------------------------------------------------ |
| payload     | 继承子流输出的payload                                        |
| error       | 执行成功后，error为空；执行失败后，error为dict类型，包含“Code”和“Description”字段：“Code”字段表示错误类型，“Description”字段表示错误描述 |
| attribute   | 继承子流的attribute信息                                      |
| variable    | 继承子流的variable信息                                       |

#### 3. 案例

当需要对某类操作进行重试时，可以使用该组件，例如发送request请求，当请求失败时，使用Until Successful进行重试

1. 添加Until Successful组件，选择按成功条件重试，当服务器返回的statusCode不等于200时，重新发送请求，设置重试次数为3，重试间隔为5秒

   ![](https://qcloudimg.tencent-cloud.cn/raw/b69a83aea60a0348b586006072cad5dd.jpg)

2. 在Until Successful组件中添加Request组件，用于发送http请求

   ![](https://qcloudimg.tencent-cloud.cn/raw/c278d84b7f28b4b82a627e875c102b3f.jpg)

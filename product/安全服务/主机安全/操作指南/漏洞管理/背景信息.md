## 背景信息
腾讯云主机安全支持对目前主流主机（Windows，Linux 等）上的漏洞进行周期性和及时性的检测功能。主机安全支持对指定主机和漏洞类别的检测，同时支持忽略漏洞等功能，可为您提供漏洞的风险、特征、严重等级及修复建议等信息，可视化界面有助于您更好的管理服务器中的漏洞风险。

本文档将介绍如何使用漏洞管理功能，帮助您管理服务器中的漏洞风险。漏洞管理功能支持检测 Linux 软件漏洞、Windows 系统漏洞、Web-CMS 漏洞、应用漏洞及应急漏洞。支持修复 Linux 软件漏洞、Web-CMS 漏洞。

### 主机安全版本
- 基础版：首次使用主机安全时，支持对全量主机进行漏洞检测，只展示5条结果。基础版不支持周期扫描和一键检测功能。
- 专业版：支持全量漏洞周期检测和一键检测功能，支持对指定服务器或指定漏洞或类别进行扫描，支持严重或高危漏洞通知等功能。
- 旗舰版：支持五类漏洞检测，提供一键修复、镜像快照功能，支持实时监控核心文件安全，支持高级威胁检测与防御等功能。
 

### 功能支持说明

<table>
<thead>
<tr>
<th>功能类型</th>
<th>支持详情</th>
</tr>
</thead>
<tbody><tr>
<td  rowspan=5 >支持检测的漏洞信息</td>
<td>Linux 软件漏洞</td>
</tr>
<tr>
 <td>Windows 系统漏洞</td>
</tr>
<tr>
 <td>Web-CMS 漏洞</td>
</tr>
<tr>
 <td>应用漏洞</td>
</tr>
<tr>
 <td>应急漏洞</td>
</tr>
<tr>
<td  rowspan=2 >支持修复的漏洞类型</td>
<td>部分 Linux 软件漏洞</td>
</tr>
<tr>
 <td>部分 Web-CMS 漏洞</td>
</tr>
<tr>
<td  rowspan=2 >支持检测和修复的操作系统</td>
<td>Windows 云服务器环境，目前支持以下版本：<li>Windows server 2012，2016，2019</li><li>Windows server 2008+ R2</li><li>Windows server 2003（limited support）</li></td>
</tr>
<tr>
<td>Linux 云服务器环境，目前支持以下版本：<li>RHEL：Versions 6 .1+（64 bit）</li><li>CentOS：Versions 6.3+（64 bit）</li><li>Ubuntu：9.10+（64 bit）</li><li>Debian：6+（64 bit）</li></td>
</tr>
</tbody></table>



## 漏洞检测
1. 登录 [主机安全控制台](https://console.cloud.tencent.com/cwp/app-vul)，在左侧导航栏中选择**漏洞管理**，进入漏洞管理页面。
2. 在漏洞管理页面上方，可进行漏洞检测并查看漏洞检测数据，漏洞检测分为**周期性检测**和**一键检测**，以满足您对服务器日常巡检的需求。
 >?若非首次检测漏洞，需开通 [主机安全专业版或旗舰版](https://buy.cloud.tencent.com/yunjing?ADTAG=cwp.buy.pro.vulManage) 才可进行漏洞检测。
 >

### 一键检测
1. 首次使用时，在漏洞管理页面，单击漏洞风险检测下方的**试用检测**。非首次使用，请单击漏洞风险检测下方**一键检测**。
>?当您**首次使用**漏洞的检测功能时，我们将为您免费提供一次检测所有服务器的服务。若您还未升级为专业版服务器或旗舰版服务器，将为您提供5条检测结果并提供对应的修复建议。
>
![](https://qcloudimg.tencent-cloud.cn/raw/aebd2cb1aae94a8e06e239b5a0f5700c.png)
2. 在“检测提示”弹窗中：选择需要检测的漏洞类型，单击**立即检测**（检测一般持续2 - 5分钟），检测完成后，检测结果会以可视化图表的方式显示在漏洞管理页面。
>?若您尚存在非专业版或旗舰版主机服务器，建议立即 [升级专业版](https://buy.cloud.tencent.com/yunjing?ADTAG=cwp.buy.pro.vulManage) 或 [主机旗舰版](https://console.cloud.tencent.com/cwp/app-vul) 防护。
>
![](https://qcloudimg.tencent-cloud.cn/raw/2e6d49c23b8901c6e324bc630ed09cec.png)

### 定期检测
1. 在漏洞管理页面，单击右上角的**漏洞设置**。
![](https://qcloudimg.tencent-cloud.cn/raw/20965dfaa6eb768701376a0f188ce80a.png)
2. 在漏洞设置页面，可以进行定期检测设置并查看已忽略的漏洞列表。
	  - **定期检测**：在漏洞设置弹窗中的“定期检测设置”标签内，您可以选择定期检测所需的检测漏洞等级、定期检测周期及每个漏洞类别是否开启检测。
	![](https://qcloudimg.tencent-cloud.cn/raw/5dcf6d6767bd902eeb96522218d5a22f.png)
		[](id:hltdgl)
      - **忽略漏洞**
 在漏洞设置弹窗中的“忽略漏洞”标签内，查看已忽略的漏洞列表，并可进行取消忽略操作。
![](https://qcloudimg.tencent-cloud.cn/raw/79ed4fa46e83b8e23810a03deb7e2ad8.png)
			
## 查看漏洞


### 漏洞信息可视化
将介绍漏洞信息可视化相关功能（其中 Linux 软件漏洞，Windows 系统漏洞、Web-CMS 漏洞、应用漏洞、应急漏洞相同，仅以 Linux 软件漏洞为例）。

1. 登录 [主机安全控制台](https://console.cloud.tencent.com/cwp/app-vul)，在左侧导航栏中选择**漏洞管理**，进入漏洞管理页面。
2. 在漏洞管理页面，查看主机安全检测到的 Linux 软件漏洞、Windows 系统漏洞、Web-CMS 漏洞、应用漏洞、应急漏洞的漏洞信息可视化。查看主机安全检测到的漏洞关联的漏洞风险情况、影响您服务器最多 TOP5 漏洞以及存在漏洞个数最多的服务器风险 TOP5。
![](https://qcloudimg.tencent-cloud.cn/raw/6341e4a41205cdc4534218575dd71cda.png)
3. 在系统组件漏洞列表中，可以查看漏洞名称、威胁等级、最后检测时间等信息。
![](https://qcloudimg.tencent-cloud.cn/raw/5d37f8ccbb912937ec77e4f24497cf62.png)
   **字段说明**：
    - **漏洞名称**：漏洞公开的命名。
    - **威胁等级**：根据漏洞的危险程度，将其划分为严重、高危、中危和低危四个等级。
    - **CVSS**：通用漏洞评分系统对该漏洞的评分。
    - **CVE 编号**：识别该漏洞的唯一标识符。
    - **最后检测时间**：取最近一次某台服务器检测出该漏洞的时间。
    - **影响服务器数（台）**：表示所有检测的服务器中，有多少台服务器存在该漏洞，即该漏洞影响机器的数量。
   - **处理状态**：处理状态共有六种，分别是待修复，修复中，已修复，已忽略，检测中，修复失败每种状态的释义如下。
<table>
<thead>
<tr>
<th>修复类型</th>
<th>详情</th>
</tr>
</thead>
<tbody><tr>
<td>待修复</td>
<td>尚未修复的漏洞（可自动修复的漏洞和提供修复方案的漏洞）。<ul><li>自动修复：该漏洞支持某个系统上的自动修复。若漏洞列表中出现的漏洞支持自动修复，那么该漏洞操作列展示<strong>自动修复、重新检测、忽略。</strong></li> <li> 修复方案：该漏洞不支持某个系统上的自动修复。若漏洞列表中出现的漏洞不支持自动修复，那么该漏洞操作列展示<strong>修复方案、重新检测、忽略</strong>。</li></td>
</tr>
<tr>
<td>修复中</td>
<td>正在自动修复中的漏洞，若该漏洞状态为修复中，那么操作列展示<strong>修复详情</strong>。</td>
</tr>
<tr>
<td>已修复</td>
<td>已经完成修复的漏洞，若该漏洞状态为已修复（包括自动修复的漏洞和手动修复的漏洞），则操作列展示<strong>查看详情、重新检测、忽略</strong>。</td>
</tr>
<tr>
<td>已忽略</td>
<td>对已存在的漏洞进行忽略操作，若该漏洞的状态为已忽略，则操作列展示<strong>取消忽略</strong>。</td>
</tr>
<tr>
<td>检测中</td>
<td>对该漏洞进行重新检测操作，若该漏洞的状态为检测中，则操作列展示<strong>停止检测</strong>。</td>
</tr>
<tr>
<td>修复失败</td>
<td>对漏洞进行自动修复操作后修复失败的漏洞，若该漏洞的状态为修复失败，那么该漏洞操作列展示<strong>自动修复、重新检测、忽略</strong>。</td>
</tr>
</tbody></table>
   - **查看漏洞详细状态漏洞状态可分为已处理和未处理：**
<table>
<thead>
<tr>
<th>漏洞状态</th>
<th>详情</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td  rowspan=2 >已处理</td>
<td>修复成功有两种情况：<ul><li>用户根据修复方案自行手动修复，这种不支持回滚。</li><li>用户在控制台对该漏洞执行“自动修复”操作，这种会创建快照，可以进行回滚。</li></td>
<td  rowspan=2 >只有自动修复的漏洞才支持回滚，手动修复及忽略的漏洞不支持，漏洞回滚后重新扫描将变为<strong>待修复</strong>的状态。</td>
</tr>
<tr>
<td>已忽略：漏洞已执行<strong>忽略</strong>的操作，主机安全将不再对该漏洞进行告警。</td>
</tr>
<tr>
<td>未处理</td>
<td>待修复：漏洞待修复。</td>
<td>对于“已忽略”的漏洞不可重新检测，需先取消忽略后，支持重新检测。对于“检测中”的漏洞不支持忽略和重新检测。“已修复”的漏洞不可进行忽略。</td>
</tr>
</tbody></table>
   - **重新检测**：
		- 方式1：选择需要检测的漏洞，在列表左上角单击**重新检测**，将批量对漏洞进行重新检测。
		- 方式2：在目标漏洞右侧，单击**重新检测**，将重新对该漏洞进行检测。
   - **忽略**：
	 **将忽略的漏洞**您可在 **Linux 软件漏洞** 页面，选中需要加入白名单的漏洞并单击**忽略**。加入白名单后，主机安全将不再对白名单中的漏洞进行告警。
![](https://qcloudimg.tencent-cloud.cn/raw/7bbf3531bdab80d95fa8d52cbec55469.png)
	忽略漏洞将从 **Linux 软件漏洞**的漏洞列表中移除，并记录在**漏洞风险检测**下方的**忽略漏洞**列表中。如需恢复主机安全对忽略漏洞的检测和告警提示，可在**忽略漏洞**列表**移除**该漏洞。
![](https://qcloudimg.tencent-cloud.cn/raw/2082d640870b6aef01dbda7a4ff08879.png)
   - **搜索漏洞**
 您可在 Linux 软件漏洞页面，通过筛选漏洞威胁等级（严重、高危、中危、低危）、漏洞处理状态（待修复、监测中、已忽略、已修复）、最后检测时间、影响机器台数、漏洞名称搜索到相关的漏洞。
![](https://qcloudimg.tencent-cloud.cn/raw/2d95a6f136eb5ef071387d66d2f2734b.png)
   - **筛选**：在漏洞列表左上角，支持按照漏洞“威胁等级”及处理“状态”筛选漏洞。
   - **搜索**：在漏洞列表右上角输入框中，输入漏洞名称，支持对单个漏洞的名称搜索。
   - **下载**：在 Linux 软件漏洞页面，单击下载![](https://qcloudimg.tencent-cloud.cn/raw/e2652b5e592a062a167081d229152cb0.png)，将主机安全检测到的所有 Linux 软件漏洞统一导出并保存到本地。导出的文件为 Excel 格式。

### 查看漏洞详情
1. 登录 [主机安全控制台](https://console.cloud.tencent.com/cwp/app-vul)，在左侧导航栏选择**漏洞管理**，进入漏洞管理页面。
2. 在漏洞管理页面下方，查看主机安全检测到的 Linux 软件漏洞页面的漏洞信息概览。
3. 单击该漏洞的**漏洞名称**或操作栏的**修复方案**，可展开对应的漏洞详情页面，查看修复方案。详情页分为两个部分，漏洞详细情况和该漏洞影响服务器列表。
   - 漏洞详情：包含漏洞描述、漏洞类型、威胁等级、披露时间、修复方案、以及漏洞特征等信息。
   - 影响服务器列表：查看该漏洞影响服务器情况，支持对单个服务器进行标签、状态筛选，支持对服务器名称搜索，支持对单个或多个服务器的重新检测和忽略，以及支持对“已忽略”的服务器取消忽略，所有忽略的服务器都会进入 [忽略漏洞管理](#hltdgl) 页面。
 ![](https://qcloudimg.tencent-cloud.cn/raw/c6e780d254d3c797b494b57950ef1ed7.png)


## 自动修复漏洞

自动修复漏洞功能目前支持部分 Linux 软件漏洞修复、Web-CMS 漏洞修复，两者功能相同，仅以 Linux 软件漏洞为例。
>?主机安全的自动修复漏洞功能为旗舰版功能，需升级 [主机旗舰版](https://console.cloud.tencent.com/cwp/app-vul) 进行使用。
 

1. 登录 [主机安全控制台](https://console.cloud.tencent.com/cwp/app-vul)，在左侧导航栏选择**漏洞管理**，进入漏洞管理页面。
2. 在漏洞管理页面下方，.选择**Linux软件漏洞**，选择需要修复的主机，可以选择如下任意一种方式修复主机。查看主机安全检测到的 Linux 软件漏洞页面的漏洞信息概览。

### 方式1 
1. 选择需要修复的漏洞，单击**自动修复**。
	![](https://qcloudimg.tencent-cloud.cn/raw/b73138a50f1b584cbed19057a37ed2d8.png)
2. 在影响的服务器列表中，选择需要修复的主机，单击操作列的**自动修复**。


### 方式2
1. 单击复选框批量勾选修复的漏洞，单击**自动修复**。
>?若所选漏洞不支持自动修复，则顶部自动修复不可点击。
>
![](https://qcloudimg.tencent-cloud.cn/raw/561103cdbe792e2e5240a1ddec25e1c7.png)
2. 单击复选框勾选主机，单击底部**确认修复**。
>?主机的自动修复为旗舰版付费功能，需升级 [主机旗舰版](https://console.cloud.tencent.com/cwp/app-vul) 进行使用。
>
![](https://qcloudimg.tencent-cloud.cn/raw/9b87ec489f63752579f7c348fd06b547.png)
3. 在漏洞管理页面，单击**确认修复**，修复单个漏洞或批量修复多个关联漏洞。修复漏洞时支持自动创建快照并修复。您可以根据需要选择自动创建快照并修复或不建立快照备份直接修复。
>?
>- 系统在修复漏洞时，可能存在一定的失败风险，建议您在修复漏洞前选中自动创建快照并修复对系统进行快照备份。
>- 确认修复按钮显示为灰色：若全部或部分被选中的服务器过去未创建过快照，则确认修复按钮显示为灰色，需要创建快照后才支持修复。
>
![](https://qcloudimg.tencent-cloud.cn/raw/83a5eb059d61dd83b7462b41af0880ef.png)
